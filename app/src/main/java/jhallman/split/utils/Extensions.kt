package jhallman.split.utils

import android.content.Context
import android.support.v4.app.Fragment
import android.support.v4.app.FragmentManager
import android.support.v4.app.FragmentTransaction
import android.support.v7.app.AppCompatActivity
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Toast

/**
 * Created by Jacob on 2018-02-13.
 * This is a class that provides extension functions to be used in activities. For instance, adding and
 * replacing fragments can be done with addFragment() and replaceFragment() instead of doing the commit() yourself.
 * Simply include jhallman.split.commons.<function name> to use the function in an activity.
 */


// Use this to call container?.inflate(R.id.fragment) when inflating view
fun ViewGroup.inflate(layoutId: Int, attachToRoot: Boolean = false): View {
    return LayoutInflater.from(context).inflate(layoutId, this, attachToRoot)
}

// Use this instead of begin() + commit() for adding and replacing fragments
inline fun FragmentManager.inTransaction(func: FragmentTransaction.() -> FragmentTransaction) {
    beginTransaction().func().addToBackStack(null).commit()
}

// Use this to add a fragment in any activity
fun AppCompatActivity.addFragment(fragment: Fragment, frameId: Int) {
    supportFragmentManager.inTransaction { add(frameId, fragment) }
}

// Use this to replace a fragment in any activity
fun AppCompatActivity.replaceFragment(fragment: Fragment, frameId: Int) {
    supportFragmentManager.inTransaction { replace(frameId, fragment) }
}

// Shorter expression to create a toast
fun Context.toast(message: CharSequence, duration: Int = Toast.LENGTH_LONG) {
    Toast.makeText(this, message, duration).show()
}
